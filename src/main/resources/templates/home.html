<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home - Film Addicted</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</head>


<body>

<!-- Navbar -->
<div th:insert="fragments/navbar :: navbar"></div>

<!-- Main content -->
<main>
    <div id="movieCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item" th:each="media, iter : ${mustWatch}"
                 th:classappend="${iter.index == 0} ? ' active'">
                <img th:src="${media.banner}" class="d-block w-100" th:alt="${media.title}">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#movieCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#movieCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>

    <!-- Must Watch-->
    <div class="container mb-5">
        <h2 class="text-white mb-4">Must Watch</h2>

        <div class="row row-cols-5 gx-4 gy-4">
            <div class="col" th:each="media : ${mustWatch}">
                <a th:href="@{'/media/' + ${media.id}}" style="text-decoration: none; color: inherit;">
                    <div class="card bg-dark border-0 h-100 text-white text-center">
                        <img th:src="${media.poster}" class="card-img-top" alt="Movie Poster"
                             style="height: 350px; object-fit: cover; border-radius: 8px;">
                        <div class="card-body">
                            <h6 class="card-title mb-1" th:text="${media.title}">Movie Title</h6>
                            <small class="text"
                                   th:text="${#lists.size(media.genres) >= 2
           ? media.genres[0].name + ', ' + media.genres[1].name + ' | ' + media.releaseYear
           : #lists.size(media.genres) == 1
           ? media.genres[0].name + ' | ' + media.releaseYear
           : 'Unknown | ' + media.releaseYear}">
                                Genre | Year
                            </small>

                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>


    <!--Lastest Movies -->
    <div class="container mb-5">
        <h2 class="text-white mb-4">Latest Movie</h2>

        <div class="row row-cols-5 gx-4 gy-4">
            <div class="col" th:each="media : ${latestMedia}">
                <a th:href="@{'/media/' + ${media.id}}" style="text-decoration: none; color: inherit;">
                    <div class="card bg-dark border-0 h-100 text-white text-center">
                        <img th:src="${media.poster}" class="card-img-top" alt="Movie Poster"
                             style="height: 350px; object-fit: cover; border-radius: 8px;">
                        <div class="card-body">
                            <h6 class="card-title mb-1" th:text="${media.title}">Movie Title</h6>

                            <small class="text"
                                   th:text="${#lists.size(media.genres) >= 2
           ? media.genres[0].name + ', ' + media.genres[1].name + ' | ' + media.releaseYear
           : #lists.size(media.genres) == 1
           ? media.genres[0].name + ' | ' + media.releaseYear
           : 'Unknown | ' + media.releaseYear}">
                                Genre | Year
                            </small>

                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>


    <!--Genre -->
    <div class="container mb-5">
        <h2 class="text-white mb-4">Popular Genres</h2>

        <div class="row row-cols-5 gx-4 gy-4">
            <div class="col" th:each="genre : ${genres}">
                <a th:href="@{'/genre/' + ${genre.id}}" style="text-decoration: none; color: inherit;">
                    <div class="card bg-dark border-0 h-100 text-white text-center">
                        <img th:src="${#lists.isEmpty(genre.mediaList) ? '/assets/default.jpg' : genre.mediaList[0].poster}"
                             class="card-img-top" alt="Genre Poster"
                             style="height: 350px; object-fit: cover; border-radius: 8px;">
                        <div class="card-body">
                            <h6 class="card-title mb-1" th:text="${genre.name}">Genre Name</h6>
                            <small class="text" th:text="'Total: ' + ${#lists.size(genre.mediaList)} + ' titles'">
                                Total: X titles
                            </small>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>


</main>
<!-- Footer -->
<div th:insert="fragments/footer :: footer"></div>
</body>
</html>
