<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">All Films</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</head>
<style>
    /* Fix arrow centering */
    .page-arrow {
        background-color: #000;
        color: #fff;
        border: 2px solid #fff;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;     /* vertical centering */
        justify-content: center; /* horizontal centering */
        font-size: 18px;
        font-weight: bold;
        text-decoration: none;
        transition: all 0.3s ease;
        line-height: 1;          /* FIX: avoids vertical misalignment */
        padding-top: 5px; /* FIX: make sure padding doesn’t offset text */
    }

    /* Page info pill */
    .page-info {
        background-color: #5a5a5a;  /* lighter than #444 for contrast */
        color: #fff;
        padding: 6px 18px;
        border-radius: 999px;
        display: flex;
        align-items: center;
        font-size: 14px;
        font-weight: 600;
        gap: 10px;
    }

    /* Fix current page black box */
    .page-info input[type="text"] {
        background-color: #1a1a1a;  /* slightly lighter black */
        color: #fff;
        border: none;
        width: 36px;
        height: 28px;
        text-align: center;
        font-weight: bold;
        border-radius: 8px;
        padding: 0;
        font-size: 15px;
        line-height: 1;
    }
    .page-info input[type="text"] {
        box-shadow: inset 0 0 2px rgba(255, 255, 255, 0.1);
        border: 1px solid #333;
    }
</style>

<body style="background-color: #121212;">
<!-- Navbar -->
<div th:insert="fragments/navbar :: navbar"></div>

<!-- Main Content -->
<div class="container mb-5">
    <h2 class="text-white mb-4" th:text="${sectionTitle}">All Films</h2>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 gx-4 gy-4">
        <div class="col" th:each="media : ${allMedia}">
            <a th:href="@{'/media/' + ${media.id}}" style="text-decoration: none; color: inherit;">
                <div class="card bg-dark border-0 h-100 text-white text-center">
                    <img th:src="${media.poster}" class="card-img-top" alt="Movie Poster"
                         style="height: 350px; object-fit: cover; border-radius: 8px;">
                    <div class="card-body">
                        <h6 class="card-title mb-1" th:text="${media.title}">Movie Title</h6>
                        <small class="text"
                               th:text="${#lists.size(media.genres) >= 2
                                       ? media.genres[0].name + ', ' + media.genres[1].name + ' | ' + media.releaseYear
                                       : #lists.size(media.genres) == 1
                                       ? media.genres[0].name + ' | ' + media.releaseYear
                                       : 'Unknown | ' + media.releaseYear}">
                            Genre | Year
                        </small>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>
<div class="d-flex justify-content-center align-items-center mt-4 pagination-bar" th:if="${totalPages > 1}">

    <!-- Previous Button -->
    <div th:if="${currentPage > 1}">
        <!-- Latest Release -->
        <a th:if="${pageTitle == 'Latest Release'}"
           th:href="@{/lastestrelease(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2 page-arrow">⮜</a>

        <!-- All Movies -->
        <a th:if="${pageTitle == 'All Movies'}"
           th:href="@{/movies(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2 page-arrow">⮜</a>

        <!-- All Series -->
        <a th:if="${pageTitle == 'All Series'}"
           th:href="@{/series(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2 page-arrow">⮜</a>

        <!-- Search -->
        <a th:if="${pageTitle == 'Search'}"
           th:href="@{/search(q=${searchQuery}, page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2 page-arrow">⮜</a>

        <!-- Genre -->
        <a th:if="${genre != null}"
           th:href="@{/genres/{id}(id=${genre.id}, page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2 page-arrow">⮜</a>
    </div>

    <!-- Page Info -->
    <div class="bg-secondary px-3 py-1 rounded-pill text-white page-info">
        Page
        <input type="text" th:value="${currentPage}" class="bg-dark text-white border-0 text-center"
               style="width: 40px;" readonly />
        / <span th:text="${totalPages}">0</span>
    </div>

    <!-- Next Button -->
    <div th:if="${currentPage < totalPages}">
        <!-- Latest Release -->
        <a th:if="${pageTitle == 'Latest Release'}"
           th:href="@{/lastestrelease(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2 page-arrow">⮞</a>

        <!-- All Movies -->
        <a th:if="${pageTitle == 'All Movies'}"
           th:href="@{/movies(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2 page-arrow">⮞</a>

        <!-- All Series -->
        <a th:if="${pageTitle == 'All Series'}"
           th:href="@{/series(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2 page-arrow">⮞</a>

        <!-- Search -->
        <a th:if="${pageTitle == 'Search'}"
           th:href="@{/search(q=${searchQuery}, page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2 page-arrow">⮞</a>

        <!-- Genre -->
        <a th:if="${genre != null}"
           th:href="@{/genres/{id}(id=${genre.id}, page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2 page-arrow">⮞</a>
    </div>

</div>


<!-- Footer -->
<div th:insert="fragments/footer :: footer"></div>
</body>
</html>
