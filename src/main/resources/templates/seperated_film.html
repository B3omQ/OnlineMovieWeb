<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">All Films</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</head>

<body style="background-color: #121212;">
<!-- Navbar -->
<div th:insert="fragments/navbar :: navbar"></div>

<!-- Main Content -->
<div class="container mb-5">
    <h2 class="text-white mb-4" th:text="${sectionTitle}">All Films</h2>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 gx-4 gy-4">
        <div class="col" th:each="media : ${allMedia}">
            <a th:href="@{'/media/' + ${media.id}}" style="text-decoration: none; color: inherit;">
                <div class="card bg-dark border-0 h-100 text-white text-center">
                    <img th:src="${media.poster}" class="card-img-top" alt="Movie Poster"
                         style="height: 350px; object-fit: cover; border-radius: 8px;">
                    <div class="card-body">
                        <h6 class="card-title mb-1" th:text="${media.title}">Movie Title</h6>
                        <small class="text"
                               th:text="${#lists.size(media.genres) >= 2
                                       ? media.genres[0].name + ', ' + media.genres[1].name + ' | ' + media.releaseYear
                                       : #lists.size(media.genres) == 1
                                       ? media.genres[0].name + ' | ' + media.releaseYear
                                       : 'Unknown | ' + media.releaseYear}">
                            Genre | Year
                        </small>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>
<div class="d-flex justify-content-center align-items-center mt-4" th:if="${totalPages > 1}">

    <!-- Previous Button -->
    <div th:if="${currentPage > 1}">
        <!-- Latest Release -->
        <a th:if="${pageTitle == 'Latest Release'}"
           th:href="@{/lastestrelease(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2">←</a>

        <!-- All Movies -->
        <a th:if="${pageTitle == 'All Movies'}"
           th:href="@{/movies(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2">←</a>

        <!-- All Series -->
        <a th:if="${pageTitle == 'All Series'}"
           th:href="@{/series(page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2">←</a>

        <!-- Search -->
        <a th:if="${pageTitle == 'Search'}"
           th:href="@{/search(q=${searchQuery}, page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2">←</a>

        <!-- Genre -->
        <a th:if="${genre != null}"
           th:href="@{/genres/{id}(id=${genre.id}, page=${currentPage - 1})}"
           class="btn btn-dark rounded-circle me-2">←</a>
    </div>

    <!-- Page Info -->
    <div class="bg-secondary px-3 py-1 rounded-pill text-white">
        Page
        <input type="text" th:value="${currentPage}" class="bg-dark text-white border-0 text-center"
               style="width: 40px;" readonly />
        / <span th:text="${totalPages}">0</span>
    </div>

    <!-- Next Button -->
    <div th:if="${currentPage < totalPages}">
        <!-- Latest Release -->
        <a th:if="${pageTitle == 'Latest Release'}"
           th:href="@{/lastestrelease(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2">→</a>

        <!-- All Movies -->
        <a th:if="${pageTitle == 'All Movies'}"
           th:href="@{/movies(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2">→</a>

        <!-- All Series -->
        <a th:if="${pageTitle == 'All Series'}"
           th:href="@{/series(page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2">→</a>

        <!-- Search -->
        <a th:if="${pageTitle == 'Search'}"
           th:href="@{/search(q=${searchQuery}, page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2">→</a>

        <!-- Genre -->
        <a th:if="${genre != null}"
           th:href="@{/genres/{id}(id=${genre.id}, page=${currentPage + 1})}"
           class="btn btn-dark rounded-circle ms-2">→</a>
    </div>

</div>




<!-- Footer -->
<div th:insert="fragments/footer :: footer"></div>
</body>
</html>
